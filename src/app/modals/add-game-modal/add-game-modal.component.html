
<Page class="page__content page" shownModally="onShownModally" xmlns:ui="nativescript-star-ratings" >
    
    <GridLayout rows="auto,10, auto,20, auto, *" width="100%" class="p-20 page modal-page"> 
        <Label row="0" class="h1 text-left" text="{{game?.title}}" textWrap="true"></Label>
               
        <GridLayout row="2" class="modal-grid" columns="auto,auto" rows="auto,20, auto">                       
            <!-- <Label text="Game Data"  backgroundColor="green"></Label> -->
            <StackLayout verticalAlignment="top" class="game-details" row="0" col="0" orientation="vertical">
                <Label>
                    <FormattedString>
                        <Span fontSize="20" fontWeight="Bold" text="Release Date: "></Span>
                        <Span fontSize="18" color="#1eb980" text="{{game?.releaseDate}}"></Span>
                    </FormattedString>
                </Label>

                <Label>
                    <FormattedString>
                        <Span fontSize="20" fontWeight="Bold" text="Developer: "></Span>
                        <Span fontSize="18" color="#1eb980" text="{{game?.developer}}"></Span>
                    </FormattedString>
                </Label>

                <Label>
                    <FormattedString>
                        <Span fontSize="20" fontWeight="Bold" text="Publisher: "></Span>
                        <Span fontSize="18" color="#1eb980" text="{{game?.publisher[0]}}"></Span>
                    </FormattedString>
                </Label>                            
            </StackLayout> 
            
            <Image width="" row="0" col="1" src="{{game?.image}}" stretch="aspectFit"></Image>
            
            <ScrollView orientation="horizontal" row="2"  colSpan="2" width="100%">
                <StackLayout orientation="horizontal" height="auto">
                    <GridLayout *ngFor="let item of game?.genre" rows="*, auto" columns="auto"> 
                        <StackLayout row="1">
                            <Border class="genre-border" cornerRadius="10" borderWidth="1" borderColor="#1eb980">
                                <Label class="genre-item" fontSize="15" [text]="item" color="white"></Label>
                            </Border>
                        </StackLayout>
                    </GridLayout> 
                </StackLayout>
            </ScrollView>   
        </GridLayout>


        <Border row="4" class="genre-border" cornerRadius="10" borderWidth="1" borderColor="white">
            <StackLayout>
                <Label class="h2 text-center" text="What did you think ?" textWrap="true"></Label>
                <StarRating filledBorderColor="#1eb980" filledColor="#1eb980" style="width:240" (valueChange)="setScore($event)" max="5" value="{{score}}">
                </StarRating>
                
                <GridLayout rows="auto" columns="*, *" width="100%">
                    <Button row="0" column="0" isEnabled="{{score != 0}}"  *ngIf="!existingGame" class="btn btn-primary"  text="Add to Library" (tap)="addGameToLibrary()" style="background-color: #1eb980;"></Button>
                    <Button row="0" column="0" *ngIf="existingGame" class="btn btn-primary"verticalAlignment="bottom" width="90%" text="Update Review" (tap)="updateGameInLibrary()" style="background-color: #1eb980;"></Button>               
                    <Button row="0" column="1" class="btn btn-primary" text="Metacritic" (tap)="launch()" style="background-color: #2195f2;"></Button>          
                </GridLayout>          
            </StackLayout>   
        </Border>

        <Button verticalAlignment="bottom" row="5" width="100%" class="btn btn-danger"  text="Close Modal" (tap)="this.close()" style="background-color: #e94236;"></Button>
        
 
    </GridLayout>
</Page>

